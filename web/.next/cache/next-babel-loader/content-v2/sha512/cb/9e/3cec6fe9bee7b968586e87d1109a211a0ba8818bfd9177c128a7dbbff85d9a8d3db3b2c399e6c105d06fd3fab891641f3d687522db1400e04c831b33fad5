{"ast":null,"code":"import { query as q } from 'faunadb';\nimport NextAuth from 'next-auth';\nimport Providers from 'next-auth/providers';\nimport { fauna } from '../../../services/fauna';\nexport default NextAuth({\n  providers: [Providers.GitHub({\n    clientId: process.env.GIT_HUB_CLIENTE_ID,\n    clientSecret: process.env.GIT_HUB_SECRET,\n    scope: 'read:user'\n  })],\n  jwt: {\n    signingKey: process.env.SIGNING_KEY\n  },\n  callbacks: {\n    async signIn(user, account, profile) {\n      const {\n        email\n      } = user;\n\n      try {\n        await fauna.query(q.Create(q.Collection('users'), {\n          data: {\n            email\n          }\n        }));\n        return true;\n      } catch {\n        return false;\n      }\n    }\n\n  }\n});","map":{"version":3,"sources":["/Users/rodrigomonteiro/Documents/Developer/Ignite/reactjs/ignews/src/pages/api/auth/[...nextauth].ts"],"names":["query","q","NextAuth","Providers","fauna","providers","GitHub","clientId","process","env","GIT_HUB_CLIENTE_ID","clientSecret","GIT_HUB_SECRET","scope","jwt","signingKey","SIGNING_KEY","callbacks","signIn","user","account","profile","email","Create","Collection","data"],"mappings":"AAAA,SAASA,KAAK,IAAIC,CAAlB,QAA2B,SAA3B;AAGA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AAEA,SAASC,KAAT,QAAsB,yBAAtB;AAEA,eAAeF,QAAQ,CAAC;AAEpBG,EAAAA,SAAS,EAAE,CACPF,SAAS,CAACG,MAAV,CAAiB;AACbC,IAAAA,QAAQ,EAAEC,OAAO,CAACC,GAAR,CAAYC,kBADT;AAEbC,IAAAA,YAAY,EAAEH,OAAO,CAACC,GAAR,CAAYG,cAFb;AAGbC,IAAAA,KAAK,EAAE;AAHM,GAAjB,CADO,CAFS;AASpBC,EAAAA,GAAG,EAAE;AACDC,IAAAA,UAAU,EAAEP,OAAO,CAACC,GAAR,CAAYO;AADvB,GATe;AAYpBC,EAAAA,SAAS,EAAE;AACP,UAAMC,MAAN,CAAaC,IAAb,EAAmBC,OAAnB,EAA4BC,OAA5B,EAAoC;AAEhC,YAAM;AAAEC,QAAAA;AAAF,UAAYH,IAAlB;;AACA,UAAI;AAEA,cAAMf,KAAK,CAACJ,KAAN,CACFC,CAAC,CAACsB,MAAF,CACItB,CAAC,CAACuB,UAAF,CAAa,OAAb,CADJ,EAEI;AAAEC,UAAAA,IAAI,EAAE;AAAEH,YAAAA;AAAF;AAAR,SAFJ,CADE,CAAN;AAMA,eAAO,IAAP;AAEH,OAVD,CAUC,MAAK;AACF,eAAO,KAAP;AACH;AAEJ;;AAlBM;AAZS,CAAD,CAAvB","sourcesContent":["import { query as q } from 'faunadb';\n\n\nimport NextAuth from 'next-auth';\nimport Providers from 'next-auth/providers';\n\nimport { fauna } from '../../../services/fauna';\n\nexport default NextAuth({ \n\n    providers: [\n        Providers.GitHub({\n            clientId: process.env.GIT_HUB_CLIENTE_ID,\n            clientSecret: process.env.GIT_HUB_SECRET,\n            scope: 'read:user'\n        })\n    ],\n    jwt: {\n        signingKey: process.env.SIGNING_KEY,\n    },\n    callbacks: {\n        async signIn(user, account, profile){\n\n            const { email } = user;   \n            try {\n\n                await fauna.query(\n                    q.Create(\n                        q.Collection('users'),\n                        { data: { email}}\n                    )\n                )\n                return true;            \n\n            }catch{\n                return false;\n            }\n\n        }\n\n    }\n})"]},"metadata":{},"sourceType":"module"}